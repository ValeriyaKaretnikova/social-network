"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[793],{6793:function(s,t,e){e.r(t),e.d(t,{default:function(){return B}});var r=e(8683),n=e(5671),o=e(3144),i=e(136),u=e(2882),a=e(2791),l=e(364),c=e(7781),p=e(1548),d=e(5628),f=e(6070),h=e(6139),v=e(704),x=e(5304),j=e(816),m="MyPosts_posts__NZwK2",P="MyPosts_postsBlock__Iwduv",_="Post_item__LY2GL",g=e(184),k=function(s){var t=s.message,r=s.likeCounts;return(0,g.jsxs)("div",{className:_,children:[(0,g.jsx)("img",{src:e(1812),alt:"avatar"}),t,(0,g.jsxs)("div",{children:[(0,g.jsx)("span",{children:"like"})," ",r]})]})},Z=(0,x.DT)(30),w=(0,v.Z)({form:"addNewPostForm"})((function(s){return(0,g.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,g.jsx)("div",{children:(0,g.jsx)(h.Z,{component:j.g,name:"newPostText",validate:[x.C1,Z],placeholder:"Post message"})}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{children:"Add post"})})]})})),I=function(s){var t=s.posts,e=s.addPost;return(0,g.jsxs)("div",{className:P,children:[(0,g.jsx)("h3",{children:"My Posts"}),(0,g.jsx)(w,{onSubmit:function(s){e(s.newPostText)}}),(0,g.jsx)("div",{className:m,children:t.map((function(s){return(0,g.jsx)(k,{message:s.message,likeCounts:s.likesCount},s.id)}))})]})},N=(0,l.$j)((function(s){return{posts:s.profilePage.posts,newPostText:s.profilePage.newPostText}}),(function(s){return{addPost:function(t){s((0,f.WA)(t))}}}))(I),S={},C=e(8551),y=e(9833),b=e(4377),A="ProfileInfo_description__+xwZ2",D="ProfileInfo_about__H5gVk",T="ProfileInfo_name__6qYCZ",M="ProfileInfo_background__eRP--",U="ProfileInfo_status__kwrkm",O="ProfileInfo_statusInput__9kI31",E="ProfileInfo_photoLoader__kEh+j",F=e(885),L=function(s){var t=(0,a.useState)(!1),e=(0,F.Z)(t,2),r=e[0],n=e[1],o=(0,a.useState)(s.status),i=(0,F.Z)(o,2),u=i[0],l=i[1];(0,a.useEffect)((function(){l(s.status)}),[s.status]);return(0,g.jsxs)("div",{className:U,children:[!r&&(0,g.jsx)("div",{children:(0,g.jsx)("span",{onDoubleClick:function(){n(!0)},children:s.status||"***"})}),r&&(0,g.jsx)("div",{children:(0,g.jsx)("input",{className:O,autoFocus:!0,onBlur:function(){n(!1),s.updateStatus(u)},onChange:function(s){l(s.currentTarget.value)},value:u})})]})},R=function(s){var t=s.profile,e=s.status,r=s.updateStatus,n=s.isOwner,o=s.savePhoto;if(!t)return(0,g.jsx)(C.Z,{});return(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:M,children:(0,g.jsx)("img",{src:y,alt:"background"})}),(0,g.jsxs)("div",{className:A,children:[(0,g.jsx)("div",{children:(0,g.jsx)("img",{src:null!=t.photos.large?t.photos.large:b,alt:"avatar"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:T,children:t.fullName}),(0,g.jsx)("div",{className:D,children:t.aboutMe}),(0,g.jsx)("div",{className:E,children:n&&(0,g.jsx)("input",{type:"file",onChange:function(s){s.target.files.length&&o(s.target.files[0])}})})]})]}),(0,g.jsx)(L,{status:e,updateStatus:r})]})},$=function(s){return(0,g.jsxs)("div",{className:S.profile,children:[(0,g.jsx)(R,{isOwner:s.isOwner,profile:s.profile,status:s.status,updateStatus:s.updateStatus,savePhoto:s.savePhoto}),(0,g.jsx)(N,{})]})},q=function(s){(0,i.Z)(e,s);var t=(0,u.Z)(e);function e(){return(0,n.Z)(this,e),t.apply(this,arguments)}return(0,o.Z)(e,[{key:"refreshProfile",value:function(){var s=this.props.router.params.userId;s||(s=this.props.authUserId)||this.props.router.history.push("/login"),this.props.getUser(s),this.props.getStatus(s)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s,t){this.props.router.params.userId!==s.router.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,g.jsx)($,(0,r.Z)((0,r.Z)({isOwner:!this.props.router.params.userId},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))}}]),e}(a.Component),B=(0,c.qC)((0,l.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authUserId:s.auth.userId,isAuth:s.auth.isAuth}}),{getUser:f.PR,getStatus:f.lR,updateStatus:f.Nf,savePhoto:f.Ju}),d.E,p.D)(q)},1548:function(s,t,e){e.d(t,{D:function(){return f}});var r=e(8683),n=e(5671),o=e(3144),i=e(136),u=e(2882),a=e(2791),l=e(364),c=e(6871),p=e(184),d=function(s){return{isAuth:s.auth.isAuth}},f=function(s){var t=function(t){(0,i.Z)(a,t);var e=(0,u.Z)(a);function a(){return(0,n.Z)(this,a),e.apply(this,arguments)}return(0,o.Z)(a,[{key:"render",value:function(){return this.props.isAuth?(0,p.jsx)(s,(0,r.Z)({},this.props)):(0,p.jsx)(c.Fg,{replace:!0,to:"/login"})}}]),a}(a.Component);return(0,l.$j)(d)(t)}}}]);
//# sourceMappingURL=793.bce29091.chunk.js.map